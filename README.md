# Simple Citations

[![GitHub Release](https://img.shields.io/github/v/release/masaki39/simple-citations?sort=semver&label=latest&logo=github&color=%237c3aed)](https://github.com/masaki39/simple-citations/releases/latest) [![Total Downloads](https://img.shields.io/badge/dynamic/json?logo=obsidian&url=https%3A%2F%2Fraw.githubusercontent.com%2Fobsidianmd%2Fobsidian-releases%2Fmaster%2Fcommunity-plugin-stats.json&query=%24%5B%22simple-citations%22%5D.downloads&label=total%20downloads&color=%237c3aed)](https://obsidian.md/plugins?id=simple-citations)

This is an Obsidian plugin that reinforces the workflow between Zotero and Obsidian. It enables the importation of literature notes from Zotero, and use them not only as the knowledge base but also the references for your writing. Requiring the installation of [Better Bibtex for Zotero](https://retorque.re/zotero-better-bibtex/) and [Pandoc](https://pandoc.org).

## âœ¨ Features

### Add & update literature notes from the bibliography file in one go.

command: `Add literature note`

<img src="./assets/ç”»é¢åéŒ²%202025-03-25%2020.50.50.gif" alt="demo" width="100%" />

The [dataview](https://github.com/blacksmithgu/obsidian-dataview) query in the gif above is as follows:

```sql
table without id 
authors[0] as FirstAuthor, journal, year, title, 
link(file.name, "Note") as Note,
elink(zotero,"Zotero") as Zotero,
elink(doi,"DOI") as DOI
from "Literatures" // set the folder name of the literature notes
sort file.ctime desc
limit 100
```

And the notes generated by the command is as follows:

![](./assets/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ%202025-03-25%2021.03.17.jpg)

> [!important]
> You have options to add literature notes automatically when the bibliography file is updated.
> You also have options to automatically update literature notes when opened.
> 
> This means that you have to add items only to Zotero, and automatically add/update them to Obsidian.

### Using literature notes as the references and export to docx(requires pandoc).

command: `Pandoc Citeproc Execution (docx)`

<img src="./assets/ç”»é¢åéŒ²%202025-03-25%2021.01.31.gif" alt="demo" width="100%" />

- Optionally, set csl file path or url in the properties named `csl`.
- CSL file is the file that defines the citation style of the journal.
- You can download or get url of the csl file from [here](https://www.zotero.org/styles).

The result file(docx) is as follows:

![](./assets/ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ%202025-03-25%2021.02.08.jpg)

## âš™ï¸ Initial Settings 

1. Install the [better bibtex for zotero](https://retorque.re/zotero-better-bibtex/) to the Zotero and configure the export of the bibliography file.
    - Set the export location to your vault.
    - Set the automatic export option to true.
    - Set the file type to `Better CSL JSON`.
2. Enable the Obsidian community plugin, then install Simple Citations and activate it.
3. Set the bibliography file path and export folder path in the plugin settings.
4. You can use the commands:
    - `Add literature note`
    - `Update literature note`
    - `Update literature note (active file)`
    - `Pandoc Citeproc Execution (docx)`
    - `Copy missing note links`
      - This command identifies and copies links to literature notes that are not included in the JSON file.

## â• Additional options

> [!tip]
> The optional content below will be **removed** if you set the option to false and execute the "Update" command.

### ğŸ·ï¸ Tag Option

Generate tags for the following:

- `author/${firstAuthor}`
- `journal/${journalName}`

### ğŸ§© Optional fields

Better Bibtex for Zotero has the function to add optional fields to the bibliography file.

1. Open the Zotero
2. Open the "Preferences"
3. Set "postscript" as you want

Reference for the script. â†’ [Scripting :: Better BibTeX for Zotero](https://retorque.re/zotero-better-bibtex/exporting/scripting/index.html)

#### ğŸ“Œ Examples

<details>
<summary>Zotero itemkey</summary>

```javascript
if (Translator.BetterCSLJSON) {
  csl.key = zotero.key;
}
```

Set `key` in the plugin settings.

</details>

<details>
<summary>PDF file path</summary>

```javascript
if (Translator.BetterCSLJSON) {
  csl.pdf = zotero.attachments
    .filter(a => a.localPath && a.localPath.toLowerCase().endsWith('.pdf'))
    .map(a => a.localPath);
}
```

Set `pdf` in the plugin settings.

</details>

<details>
<summary>Collection name</summary>

```javascript
if (Translator.BetterCSLJSON) {

  function path(key) {
    const coll = Translator.collections[key]
    if (!coll) return ''
    if (!coll.parent) {return `${coll.name}`}
    else {return `${path(coll.parent)}/${coll.name}`}
  }

  let collections = [];

  zotero.collections.forEach((key) => {
    collections.push(path(key))
  });

  csl.collections = collections;
}
```

Set `collections` in the plugin settings.

> From [Issues #5](https://github.com/masaki39/simple-citations/issues/5)

</details>

### ğŸ“ Abstract Option

Insert the abstract section in the top of the note.
The comment tag below is used to identify the abstract section.

`<!-- START_ABSTRACT -->`

`<!-- END_ABSTRACT -->`

### ğŸ“„ Template Option

Insert the template content in the top of the note.
The comment tag below is used to identify the template section.

`<!-- START_TEMPLATE -->`

`<!-- END_TEMPLATE -->`

> [!note]
> This template is applied to all notes and the content is static. 
> Therefore, it is recommended to use [Dataview](https://github.com/blacksmithgu/obsidian-dataview) for setting dynamic templates.

## ğŸ”— Link Formatting 

When executing the "Pandoc Citeproc Execution (docx)" command, the link format is temporarily converted to the format of the pandoc citeproc.

The plugin modifies the link format as follows:
- `[[@citation-key]]` â†’ `[@citation-key]`
- `[[@citation-key|aliases]]` â†’ `[@citation-key]` // aliases are allowed
- `[[@citation-key]][[@citation-key]]` â†’ `[@citation-key;@citation-key]` // multiple citations are allowed
- `[[@citation-key]]   [[@citation-key]]` â†’ `[@citation-key;@citation-key]` // spaces or line breaks can be inserted between links
- End of a sentence: `[[@citation-key]]` â†’ end of a sentence `[@citation-key]`. // inserts links before `.` if there is nothing between them.

## ğŸ™ Support

<a href='https://ko-fi.com/Q5Q31CGF07' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://storage.ko-fi.com/cdn/kofi6.png?v=6' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>
